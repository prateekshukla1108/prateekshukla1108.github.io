<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prateek's Blog</title>
  <meta name="description" content="Personal blog by Prateek Shukla - exploring AI, philosophy, life, and neuroscience through thoughtful writing and analysis.">
  <meta name="author" content="Prateek Shukla">
  <meta name="keywords" content="AI, artificial intelligence, philosophy, neuroscience, technology, personal development, blog">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://prateekshukla1108.github.io/">
  <meta property="og:title" content="Prateek's Blog">
  <meta property="og:description" content="Personal blog exploring AI, philosophy, life, and neuroscience through thoughtful writing and analysis.">
  <meta property="og:image" content="https://prateekshukla1108.github.io/assets/images/ai-cover.webp">
  <meta property="og:site_name" content="Prateek's Blog">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://prateekshukla1108.github.io/">
  <meta property="twitter:title" content="Prateek's Blog">
  <meta property="twitter:description" content="Personal blog exploring AI, philosophy, life, and neuroscience through thoughtful writing and analysis.">
  <meta property="twitter:image" content="https://prateekshukla1108.github.io/assets/images/ai-cover.webp">

  <!-- Additional SEO -->
  <link rel="canonical" href="https://prateekshukla1108.github.io/">
  <meta name="robots" content="index, follow">
  <meta name="language" content="English">
  <link rel="preload" href="/blog/post.min.css" as="style">
  <link rel="preload" href="/blog/posts.json" as="fetch" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@400;500;700;900&display=swap">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@400;500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/blog/post.min.css">

  <!-- Structured Data for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Blog",
    "name": "Prateek's Blog",
    "description": "Personal blog exploring AI, philosophy, life, and neuroscience through thoughtful writing and analysis.",
    "url": "https://prateekshukla1108.github.io/",
    "author": {
      "@type": "Person",
      "name": "Prateek Shukla",
      "url": "https://prateekshukla1108.github.io/"
    },
    "publisher": {
      "@type": "Person",
      "name": "Prateek Shukla"
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://prateekshukla1108.github.io/"
    },
    "keywords": ["AI", "artificial intelligence", "philosophy", "neuroscience", "technology", "personal development"]
  }
  </script>

  <!-- Inline SVG icons for better performance - no external dependencies -->
</head>

<body>
  <!-- SVG Icon Definitions -->
  <svg style="display: none;" aria-hidden="true">
    <defs>
      <symbol id="icon-home" viewBox="0 0 576 512">
        <path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/>
      </symbol>
      <symbol id="icon-moon" viewBox="0 0 384 512">
        <path d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/>
      </symbol>
      <symbol id="icon-sun" viewBox="0 0 512 512">
        <path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 141.1 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6l90.3 62.3 90.3-62.3c4.5-3.1 10.2-3.7 15.2-1.6zM256 512c-50.8 0-155.3-38.7-155.3-38.7s104.5-38.7 155.3-38.7s155.3 38.7 155.3 38.7S306.8 512 256 512z"/>
      </symbol>
      <symbol id="icon-bolt" viewBox="0 0 448 512">
        <path d="M349.4 44.6c5.9-13.7 1.5-29.7-10.6-38.5s-28.6-8-39.9 1.8l-256 224c-10 8.7-13.6 22.9-8.9 35.3S50.7 288 64 288H175.5L98.6 467.4c-5.9 13.7-1.5 29.7 10.6 38.5s28.6 8 39.9-1.8l256-224c10-8.7 13.6-22.9 8.9-35.3s-16.6-20.7-30-20.7H272.5L349.4 44.6z"/>
      </symbol>
      <symbol id="icon-layer-group" viewBox="0 0 576 512">
        <path d="M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 4 13.9 12.5 11.8 21.5s-10.1 14.9-19.3 16.7l-25 4.7c-8.3 1.6-15.7 8-18.3 16.2s.9 16.9 7.8 22.3l82.1 73.4c8.7 7.8 12.3 19.6 9.3 30.7s-13.3 19.6-24.8 21.4L248.6 417.2c-7.9 1.5-16.1-1.4-21.9-7.8L169.4 374c-7.8-8.7-22.1-9.3-30.7-1.5s-13.3 19.6-9.3 30.7l10.4 37.4c3.4 12.2-2.2 25.1-12.6 32.6s-24.1 8.9-34.3 2.7L73.7 423.3c-4.9-2.9-11.1-1.8-14.9 2.7s-3.8 11.8-.7 16.9l13.7 39.4c3.4 9.8 1.8 20.5-4.3 28.8s-15.7 13.3-25.6 9.2L2.8 482.7C-3.4 479.7-11.1 482-14 488.2s-1.8 13.3 2.7 18.2l34.1 54.8c5.5 8.9 17.3 11.8 26.2 6.6s14.2-15.7 11.8-25.6L100.4 484c-3.4-12.2 2.2-25.1 12.6-32.6s24.1-8.9 34.3-2.7l25.2 14.6c8.9 5.2 20.2 1.8 26.2-7.8l9.6-14.4c7.8-11.7 24.7-14.6 36.4-6.9l17.9 10.4c8.9 5.2 20.2 1.8 26.2-7.8l9.6-14.4c7.8-11.7 24.7-14.6 36.4-6.9l17.9 10.4c8.9 5.2 20.2 1.8 26.2-7.8l9.6-14.4c6.1-9.1 18.8-13.3 30.7-9.3l37.4 10.4c9.8 2.7 20.5 0 28.8-6.6l39.4-25.6c9.8-6.4 12.6-18.2 6.6-28.1s-18.2-12.6-28.1-6.6l-25.6 16.7c-8.9 5.8-20.2 3.4-26.2-5.2l-9.6-14.4c-6.1-9.1-18.8-13.3-30.7-9.3L281.2 356c-8.9 2.4-15.7 10.8-15.7 20.2c0 8.3 5 15.7 12.3 18.7l25 4.7c9.2 1.8 16.7 9.3 19.3 18.3s-3.3 17.7-11.8 21.5L264.5 506.8c-14.9 6.9-32.1 6.9-47 0L45.9 407.9c-8.5-4-13.9-12.5-11.8-21.5s10.1-14.9 19.3-16.7l25-4.7c7.3-1.4 13.3-7.2 15.7-14.2s-1.4-14.4-7.8-18.7L26.7 255.4c-8.7-7.8-12.3-19.6-9.3-30.7s13.3-19.6 24.8-21.4L184.6 94.8c7.9-1.5 16.1 1.4 21.9 7.8l32.4 28.6c7.8 6.9 18.8 8.9 27.8 4.9s14.4-13.3 12.6-23.1L252.4 23.2c-3.4-12.2 2.2-25.1 12.6-32.6s24.1-8.9 34.3-2.7l39.4 25.6z"/>
      </symbol>
      <symbol id="icon-search" viewBox="0 0 512 512">
        <path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 0 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/>
      </symbol>
      <symbol id="icon-arrow-up" viewBox="0 0 448 512">
        <path d="M246.6 9.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 109.3 86.6 214.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"/>
      </symbol>
      <symbol id="icon-calendar" viewBox="0 0 448 512">
        <path d="M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zm64 80v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm128 0v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H336zM64 400v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H208zm112 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H336c-8.8 0-16 7.2-16 16z"/>
      </symbol>
      <symbol id="icon-user" viewBox="0 0 448 512">
        <path d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/>
      </symbol>
      <symbol id="icon-clock" viewBox="0 0 512 512">
        <path d="M256 0C397.4 0 512 114.6 512 256S397.4 512 256 512S0 397.4 0 256S114.6 0 256 0zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"/>
      </symbol>
    </defs>
  </svg>

  <a href="/" class="home-icon" aria-label="Go to home page">
    <svg width="20" height="20" aria-hidden="true"><use href="#icon-home"></use></svg>
  </a>

  <div class="container">
  <div class="bg-layers" aria-hidden="true">
    <div class="grid"></div>
    <div class="scan"></div>
    <div class="data-stream"></div>
    <div class="data-stream"></div>
    <!-- Additional Cyberpunk Decorative Elements -->
    <div class="cyber-circuit"></div>
    <div class="cyber-circuit"></div>
    <div class="neon-pulse"></div>
  </div>
    <header>
      <div class="header-content">
        <!-- Home icon is now positioned fixed -->
      </div>
      <nav class="labels" id="labels" role="navigation" aria-label="Blog post categories">
        <span class="label active" data-tag="all" role="button" tabindex="0" aria-pressed="true">All</span>
        <span class="label" data-tag="AI" role="button" tabindex="0" aria-pressed="false">AI</span>
        <span class="label" data-tag="Philosophy" role="button" tabindex="0" aria-pressed="false">Philosophy</span>
        <span class="label" data-tag="Life" role="button" tabindex="0" aria-pressed="false">Life</span>
        <span class="label" data-tag="Others" role="button" tabindex="0" aria-pressed="false">Others</span>
        <span class="label" data-tag="Neuroscience" role="button" tabindex="0" aria-pressed="false">Neuroscience</span>
      </nav>
    </header>

    <section class="hero">
      <h1 class="glitch title" data-text="Prateek's Blog">Prateek's Blog</h1>
      <p class="subtitle">AI ‚Ä¢ Philosophy ‚Ä¢ Life ‚Ä¢ Neuroscience</p>
      <p class="intro">Welcome to my brain where ideas spark, clash, and sometimes make sense.</p>
      <div class="cta-group">
        <a href="#posts" class="btn primary"><svg width="16" height="16" aria-hidden="true"><use href="#icon-bolt"></use></svg> Read Latest</a>
        <a href="#labels" class="btn ghost"><svg width="16" height="16" aria-hidden="true"><use href="#icon-layer-group"></use></svg> Explore Tags</a>
      </div>
      <div class="search-bar">
        <svg width="16" height="16" aria-hidden="true"><use href="#icon-search"></use></svg>
        <input id="searchInput" type="text" placeholder="Search posts by title, tag, or summary" aria-label="Search posts" role="searchbox" autocomplete="off">
      </div>
    </section>

    <main id="posts" role="main" aria-label="Blog posts">
      <div class="posts" role="feed" aria-label="List of blog posts">
        <div class="loading">Loading posts...</div>
      </div>
    </main>

    <footer>
      <div class="social-links">
        
      </div>
    </footer>
  </div>

  <button class="back-to-top" id="backToTop" aria-label="Back to top" title="Back to top">
    <svg width="16" height="16" aria-hidden="true"><use href="#icon-arrow-up"></use></svg>
  </button>

  <script>
// Global state
let allPosts = [];
let currentTag = 'all';
let lastModified = null; // To store the last modified time
let searchQuery = '';
let labelsRebuilt = false; // Track if labels have been rebuilt
let reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
const dateFormatter = new Intl.DateTimeFormat(undefined, { year: 'numeric', month: 'short', day: 'numeric' });


// Note: Removed dynamic markdown rendering to reduce JS size and work; static HTML posts are linked

// URL state helpers
function getStateFromURL() {
  const params = new URLSearchParams(location.search);
  return {
    tag: params.get('tag') || 'all',
    q: params.get('q') || ''
  };
}

function updateURLState(tag, q) {
  const params = new URLSearchParams(location.search);
  if (tag && tag !== 'all') params.set('tag', tag); else params.delete('tag');
  if (q && q.trim()) params.set('q', q.trim()); else params.delete('q');
  const newUrl = params.toString() ? `${location.pathname}?${params.toString()}` : location.pathname;
  history.replaceState(null, '', newUrl);
}

// Debounce utility
function debounce(fn, delay = 150) {
  let t;
  return (...args) => {
    clearTimeout(t);
    t = setTimeout(() => fn.apply(null, args), delay);
  };
}

// Filter posts by tag
function filterPosts(tag) {
  currentTag = tag;
  applyFilters();

  // Update active label
  document.querySelectorAll('.label').forEach(label => {
    label.classList.toggle('active', label.dataset.tag === tag);
  });
  updateURLState(currentTag, searchQuery);
}

function applyFilters() {
  const filteredByTag = currentTag === 'all' ? allPosts : allPosts.filter(post => post.tags.includes(currentTag));
  const q = searchQuery.trim().toLowerCase();
  const filtered = q
    ? filteredByTag.filter(post =>
        post.title.toLowerCase().includes(q) ||
        post.excerpt.toLowerCase().includes(q) ||
        (post.tags || []).join(' ').toLowerCase().includes(q)
      )
    : filteredByTag;
  displayPosts(filtered);
}

function rebuildLabelsFromPosts(posts) {
  const container = document.getElementById('labels');
  if (!container) return;
  const tagSet = new Set();
  posts.forEach(p => (p.tags || []).forEach(t => tagSet.add(t)));
  const tags = ['all', ...Array.from(tagSet).sort((a,b)=>a.localeCompare(b))];
  container.innerHTML = tags.map(t => `<span class="label ${t === currentTag ? 'active' : ''}" data-tag="${t}">${t}</span>`).join('');
}

// Display posts function
function displayPosts(posts) {
  const postsContainer = document.querySelector('.posts');

  if (posts.length === 0) {
    postsContainer.innerHTML = '<div class="error">No posts found</div>';
    return;
  }

  postsContainer.innerHTML = posts.map(post => `
    <article class="post" data-slug="${post.slug}">
        <div class="post-header">
            ${post.coverImage ? `<img src="${post.coverImage}" alt="${post.title}" class="post-cover" loading="lazy" decoding="async" referrerpolicy="no-referrer">` : ''}
            <h2 class="post-title">${post.title}</h2>
            <div class="post-meta">
                <span class="post-date"><svg width="14" height="14" aria-hidden="true"><use href="#icon-calendar"></use></svg> ${dateFormatter.format(new Date(post.date))}</span>
                <span class="post-author"><svg width="14" height="14" aria-hidden="true"><use href="#icon-user"></use></svg> ${post.author}</span>
                <span class="post-reading-time"><svg width="14" height="14" aria-hidden="true"><use href="#icon-clock"></use></svg> ${post.readingTime}</span>
            </div>
        </div>

        <div class="post-tags">
            ${(post.tags || []).map(tag => `<span class="tag" data-tag="${tag}">${tag}</span>`).join('')}
        </div>

        <p class="post-excerpt">${post.excerpt}</p>

        <a class="read-more" href="/blog/posts/${post.slug}.html">Read More</a>
    </article>`).join('');
}


// Load blog posts
async function loadBlogPosts() {
  try {
    let headers = {};

    // If lastModified exists, send it in the If-Modified-Since header
    if (lastModified) {
      headers = { 'If-Modified-Since': lastModified };
    }

    // Simple loading state

    const controller = new AbortController();
    const timeout = setTimeout(() => controller.abort(), 8000);
    const response = await fetch('/blog/posts.json', { headers, cache: 'no-cache', signal: controller.signal }).catch((e) => { throw e; });
    clearTimeout(timeout);

    if (response.status === 304) {
      // Not modified, do nothing
      return;
    } else if (response.ok) {
      const data = await response.json();
      allPosts = data.posts;

      // Get the new Last-Modified header
      lastModified = response.headers.get('Last-Modified');

      // Cache locally for offline
      try { localStorage.setItem('postsCache', JSON.stringify({ ts: Date.now(), posts: allPosts })); } catch (_) {}

      // Sort posts by date (newest first)
      allPosts.sort((a, b) => new Date(b.date) - new Date(a.date));

      // Restore state from URL/localStorage
      const state = getStateFromURL();
      const storedTag = localStorage.getItem('currentTag');
      currentTag = state.tag || storedTag || 'all';
      const input = document.getElementById('searchInput');
      searchQuery = state.q || '';
      if (input) input.value = searchQuery;

      // Build dynamic tags (only once)
      if (!labelsRebuilt) {
        rebuildLabelsFromPosts(allPosts);
        labelsRebuilt = true;
      }

      // Display posts
      applyFilters();
    } else {
      throw new Error('Failed to load blog posts');
    }
  } catch (error) {
    console.error('Error loading blog posts:', error);

    // Try cache first
    let cacheLoaded = false;
    try {
      const cached = JSON.parse(localStorage.getItem('postsCache'));
      if (cached && Array.isArray(cached.posts) && cached.posts.length > 0) {
        allPosts = cached.posts;
        allPosts.sort((a, b) => new Date(b.date) - new Date(a.date));
        if (!labelsRebuilt) {
          rebuildLabelsFromPosts(allPosts);
          labelsRebuilt = true;
        }
        applyFilters();
        cacheLoaded = true;
        console.log('Loaded posts from cache');
      }
    } catch (cacheError) {
      console.warn('Failed to load from cache:', cacheError);
    }

    // Show appropriate error message
    const postsContainer = document.querySelector('.posts');
    if (!cacheLoaded) {
      const errorMessage = error.name === 'AbortError'
        ? 'Request timed out. Please check your connection.'
        : error.message.includes('fetch')
        ? 'Network error. Please check your internet connection.'
        : 'Unable to load blog posts. Please try refreshing the page.';

      postsContainer.innerHTML = `
        <div class="error" role="alert">
            <h3>‚ö†Ô∏è Unable to Load Posts</h3>
            <p>${errorMessage}</p>
            <button onclick="location.reload()" class="btn primary">Refresh Page</button>
        </div>`;
    } else {
      // Show a subtle notification that we're using cached data
      const notification = document.createElement('div');
      notification.className = 'cache-notification';
      notification.innerHTML = 'üì∂ Showing cached posts (connection issues)';
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--neon-pink);
        color: #000;
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 14px;
        z-index: 1000;
        box-shadow: 0 2px 12px rgba(255, 0, 98, 0.3);
      `;
      document.body.appendChild(notification);
      setTimeout(() => notification.remove(), 5000);
    }
  }
}

// Removed skeleton loading for better performance

// Load posts when the page loads
document.addEventListener('DOMContentLoaded', () => {
  loadBlogPosts();
  const input = document.getElementById('searchInput');
  if (input) {
    const onInput = debounce((e) => {
      searchQuery = e.target.value || '';
      updateURLState(currentTag, searchQuery);
      applyFilters();
    }, 200);
    input.addEventListener('input', onInput);
  }
  // Label interactions via delegation
  const labelsContainer = document.getElementById('labels');
  if (labelsContainer) {
    // Click events
    labelsContainer.addEventListener('click', (e) => {
      const el = e.target.closest('.label');
      if (!el) return;
      filterPosts(el.dataset.tag);
    });

    // Keyboard navigation
    labelsContainer.addEventListener('keydown', (e) => {
      const el = e.target.closest('.label');
      if (!el) return;

      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        filterPosts(el.dataset.tag);
      }

      // Arrow key navigation
      if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
        e.preventDefault();
        const labels = Array.from(labelsContainer.querySelectorAll('.label'));
        const currentIndex = labels.indexOf(el);
        let nextIndex;

        if (e.key === 'ArrowRight') {
          nextIndex = currentIndex + 1;
        } else {
          nextIndex = currentIndex - 1;
        }

        if (nextIndex >= 0 && nextIndex < labels.length) {
          labels[nextIndex].focus();
        }
      }
    });
  }
  // Posts interactions via delegation (tags + card click + prefetch)
  const postsContainer = document.querySelector('.posts');
  if (postsContainer) {
    postsContainer.addEventListener('click', (e) => {
      const tagEl = e.target.closest('.tag');
      if (tagEl) {
        e.preventDefault();
        e.stopPropagation();
        filterPosts(tagEl.dataset.tag || tagEl.textContent.trim());
        return;
      }
      const postEl = e.target.closest('.post');
      if (postEl && !e.target.closest('a')) {
        const link = postEl.querySelector('.read-more');
        if (link) location.href = link.href;
      }
    });
  }
  // Keyboard shortcut to focus search
  window.addEventListener('keydown', (e) => {
    if (e.key === '/' && !(e.target instanceof HTMLInputElement)) {
      e.preventDefault();
      input && input.focus();
    }
  });
  // Back to top button
  const backBtn = document.getElementById('backToTop');
  const onScroll = () => {
    if (!backBtn) return;
    if (window.scrollY > 400) backBtn.classList.add('visible'); else backBtn.classList.remove('visible');
  };
  window.addEventListener('scroll', onScroll, { passive: true });
  backBtn && backBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
});

// (Replaced by delegated listener on #labels)

</script>

</body>

</html>
